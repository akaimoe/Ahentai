function dynamicLoadCss(csslink) { var head = document.getElementsByTagName("head")[0]; var link = document.createElement("link");
    link.href = csslink;
    link.rel = "stylesheet";
    link.type = "text/css";
    head.appendChild(link);
    console.log(link) }

function loadgoogle() { if (window.location.host != "127.0.0.1") { console.log(" load analysis"); try { dynamicLoadJs("https://www.googletagmanager.com/gtag/js?id=G-L9L2HV1MLR", true);
            window.dataLayer = window.dataLayer || [];

            function gtag() { dataLayer.push(arguments) }
            gtag("js", new Date);
            gtag("config", "G-L9L2HV1MLR") } catch (e) { console.log(e) } } }(async() => { loadgoogle() })();
document.onload = function() { lazySizes.init();
    lazySizes.loader.checkElems(); var count = 0; var checkimg = setInterval(function() { if (count++ > 3) { clearTimeout(checkimg) }
        $("img").each(function() { if (this.naturalWidth > 0 && $(this).attr("src").indexOf("loading.gif") == -1) { return true } else { console.log(" copic img load error" + $(this).attr("src")); var orgimg = $(this).attr("data-src"); if (orgimg != "") $(this).attr("src", orgimg);
                else $(this).attr("src", $(this).attr("src").replace("i1.wp.com", "")) } }) }, 20 * 1e3) };
$(document).ready(function() { restLinkTime(); if (getPar("pg") == 1 || getPar("pg") == 2) restLinkTime("div.card-body.text-center a") });

function checkHostJump(noteid) { $(".js-set-host").text(document.location.host); if (getPar("ref") != "") { clearCache();
        notification(noteid, 5e3) } }

function clearCache() { if ("serviceWorker" in navigator) { caches.keys().then(function(cacheNames) { cacheNames.forEach(function(cacheName) { caches.delete(cacheName) }) });
        caches.keys().then(function(keyList) { return Promise.all(keyList.map(function(key) { caches.delete(key) })) }) } }

//function restLinkTime(xpath = ".time-link") { $(xpath).each(function() { if (this.href == undefined) { console.log(this);
//            console.log("please check time link"); return true } var time = "&vflush=" + (new Date).getFullYear() + "" + ((new Date).getMonth() + 1) + "" + (new Date).getHours(); if (this.href.indexOf("&vflush=") > 0) { console.log("刷新模塊出現重複調用，已放棄，請檢查調用位置。") } if (this.href.indexOf("?") == -1) this.href = this.href + "?" + time;
//        else this.href = this.href + time }) }

function setPLine(lineCount) { setCookie("pline", lineCount, 365);
    console.log("line" + lineCount);
    toastUtils("已經設置為：線路" + parseInt(getCookie("pline")) + "刷新生效。", "ok", 3e3) }

function toastUtils(content, closetext, hidetime) { $(".toast-set-text").text(content);
    $(".toast-set-button").text(closetext); if (hidetime == -1) { toastbox("toast-user") } else toastbox("toast-user", hidetime) }

function questionJump() { if ($(".myquestion").attr("href") != undefined) { toastUtils("正在跳轉 請稍等...", "3s关闭", 3e3);
        document.location.href = $(".myquestion").attr("href") } else toastUtils("未找到聯係方式，請後臺設置。", "3s关闭", 3e3) }
if (getCookie("setloaderMode") == 1) { console.log("user set hide loader");
    $("#loader").fadeOut() }

function setloaderMode() { setCookie("setloaderMode", "1");
    $("#loader").fadeOut() }

function startSearch(setMode) { if (setMode == 2) { $(".my-search-form").attr("action", "msearch") }
    $(".my-mode-check").attr("value", setMode);
    $(".searchForm").submit() }

function randomIntFromInterval(min, max) { return Math.floor(Math.random() * (max - min + 1) + min) }

function seoSet(title, description = "", keywords = "") { document.title = title; let shtml = '  <meta name="description" content="' + description + '"><meta name="keywords" content="' + keywords + '">\n';
    $("head").append(shtml) }

function randomNum(minNum, maxNum) { switch (arguments.length) {
        case 1:
            return parseInt(Math.random() * minNum + 1, 10); break;
        case 2:
            return parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10); break;
        default:
            return 0; break } }